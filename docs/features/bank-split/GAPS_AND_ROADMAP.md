# Bank-Split: Анализ пробелов и план доработок

**Дата:** 2026-01-17
**Обновлено:** 2026-01-18 (v10 — GAP-012 Admin Panel complete)
**Статус:** В РАБОТЕ

---

## ТЕКУЩЕЕ СОСТОЯНИЕ

### Backend: 100% готов

**Модели (16 файлов):**
- `bank_split.py` — DealSplitRecipient, SplitRuleTemplate, BankEvent, и др.
- `consent.py` — DealConsent (GAP-003 ✅)
- `invitation.py` — DealInvitation (GAP-001 ✅)
- `dispute.py` — Dispute, DisputeEvidence (GAP-005 ✅)
- `service_completion.py` — ServiceCompletion (GAP-006 ✅)
- `split_adjustment.py` — SplitAdjustment (GAP-008 ✅)
- `contract.py` — ContractTemplate, SignedContract (GAP-010 ✅)

**Миграции (13 применено):**
- 007: deal_consents
- 008: deal_invitations
- 009: disputes
- 010: service_completions
- 011: split_adjustments
- 012: signed_contracts
- 013: fix_executor_id_type

**API Endpoints (13 файлов):**
- `/bank-split/*` — 14+ endpoints
- `/disputes/*` — споры и возвраты
- `/invitations/*` — приглашения партнёров
- `/admin/*` — админ-панель
- `/sign/*` — ПЭП подписание

**Инфраструктура:**
- T-Bank интеграция (production ready)
- Celery tasks (hold expiry, reconciliation)
- SMS.RU интеграция
- 111 unit tests

### Frontend: 90% готов

**Готовые страницы (23):**
- Landing + 3 auth flows (Phone/Email OTP, Password)
- Agent: dashboard, deals list, deal details, bank-split form, profile
- Agency: dashboard, deals, agents, finance, settings
- Client: dashboard, deal details, documents
- Special: `/sign/[token]`, `/pay/[dealId]`, `/invite/[token]`

### Что требует доработки (Frontend)
- ~~UI для создания споров~~ ✅ (GAP-005 завершён)
- ~~UI для подтверждения услуги~~ ✅ (GAP-006 завершён)
- ~~UI для корректировки сплита~~ ✅ (GAP-008 завершён)
- ~~UI слайдер пропорций~~ ✅ (GAP-007 завершён)
- ~~Admin panel UI~~ ✅ (GAP-012 завершён)
- Email уведомления (SMS работает)

---

## РЕЗУЛЬТАТЫ ТЕСТИРОВАНИЯ (2026-01-17)

### API Endpoints — Статус

| Endpoint | Метод | Результат | Примечание |
|----------|-------|-----------|------------|
| `/health` | GET | OK | Работает |
| `/api/v1/bank-split/webhooks/tbank` | POST | `{"Success":true}` | Работает |
| `/api/v1/bank-split` | POST | 401 | Требует auth — корректно |
| `/api/v1/deals` | GET | 401 | Требует auth — корректно |
| `/api/v1/sign/{token}` | GET | 404 | ✅ Исправлено (было 500) |
| `/api/v1/bank-split/{id}/send-payment-link` | POST | OK | ✅ Новый endpoint |

### UI Pages — Статус

| Страница | URL | Статус | Примечание |
|----------|-----|--------|------------|
| Landing | `/` | ✅ OK | 3 роли, cookie banner |
| Auth Realtor | `/realtor` | ✅ OK | Phone + SMS OTP |
| Auth Client | `/client` | ✅ OK | Email + Email OTP |
| Auth Agency | `/agency` | ✅ OK | Email + Password |
| Bank-split form | `/agent/deals/bank-split/new` | ⚠️ GAPS | См. ниже |
| Sign page | `/sign/[token]` | ✅ OK | ПЭП работает! |
| Payment page | `/pay/[dealId]` | ✅ OK | QR + URL работают |

### Проблемы в Bank-split форме (найдено при UI тесте)

| Проблема | Описание | GAP | Статус |
|----------|----------|-----|--------|
| **Нет комиссии 4%** | В форме нигде не показана комиссия платформы | GAP-002 | ✅ Исправлено |
| **Нет согласия** | Нет checkbox для согласия на комиссию | GAP-003 | ✅ Исправлено |
| **Со-агент по ID** | Нужно вводить ID вручную, нет поиска/приглашения | GAP-001 | В работе |

### Обнаруженные баги

#### BUG-001: Sign endpoint 500 вместо 404 ✅ ИСПРАВЛЕНО
**Severity:** Low
**Endpoint:** `GET /api/v1/sign/{invalid_token}`
**Ожидаемый результат:** 404 Not Found
**Фактический результат:** ~~500 Internal Server Error~~ → 404 Not Found
**Файл:** `backend/app/api/v1/endpoints/sign.py:36-55`
**Решение:** Добавлен try-except для обработки ошибок БД

#### BUG-002: Bank-split форма — отсутствует комиссия сервиса ✅ ИСПРАВЛЕНО
**Severity:** High (блокер для запуска)
**Страница:** `/agent/deals/bank-split/new`
**Проблема:** ~~В форме создания сделки нигде не показана комиссия платформы 4%~~
**Файл:** `frontend/app/agent/deals/bank-split/new/page.tsx`
**Решение:** Добавлен расчёт и отображение комиссии 4% + checkbox согласия

---

## ВЫЯВЛЕННЫЕ ПРОБЕЛЫ (GAPS)

### P0 — КРИТИЧЕСКИЕ (блокируют запуск)

#### GAP-000: F.Doc интеграция для ПЭП (ПЕРЕСМОТРЕНО)

**ВАЖНО:** После UI тестирования выяснилось, что **ПЭП уже работает** через внутреннюю SMS-верификацию на странице `/sign/[token]`. Клиент даёт 2 согласия и подтверждает кодом из SMS.

**Варианты развития:**

| Вариант | Описание | Оценка |
|---------|----------|--------|
| A. Оставить как есть | Текущая ПЭП достаточна для MVP | 0 дней |
| B. Улучшить текущую | Добавить хранение документов, audit trail | 3-5 дней |
| C. Интегрировать F.Doc | Внешний сервис с юр. гарантиями | 7-10 дней |

**Рекомендация:** Вариант A или B для MVP, F.Doc — в будущем при масштабировании.

**Если выбран F.Doc:**
- F.Doc API: https://fdoc.ru/integration/api
- Требуется: API Key, модель `FDocDocument`, webhooks
- Плюс: внешние юр. гарантии, хранение документов
- Минус: зависимость от внешнего сервиса, стоимость

**Оценка:** 0-10 дней (зависит от выбранного варианта)

---

#### GAP-000.1: Доставка ссылки на оплату клиенту ✅ РЕАЛИЗОВАНО

**ВАЖНО:** Страница оплаты `/pay/[dealId]` **уже работает** — показывает QR код и кнопку "Перейти к оплате".

**User Story:**
> Как клиент, после подписания договора я хочу получить ссылку на оплату

**Текущее состояние:**
- ✅ Payment page готова (QR + URL)
- ✅ API endpoint для отправки SMS клиенту
- ✅ Кнопка "Отправить SMS" на странице сделки агента
- ✅ QR код отображается на странице сделки агента

**Реализация:**

| Компонент | Файл |
|-----------|------|
| API endpoint | `backend/app/api/v1/endpoints/bank_split.py` (send-payment-link) |
| Frontend button | `frontend/app/agent/deals/bank-split/[id]/page.tsx` |
| SMS provider | `backend/app/services/sms/provider.py` (SMS.RU) |

**Статус:** ✅ Завершено

---

#### GAP-001: Приглашение партнёра в сделку ✅ ЗАВЕРШЕНО
**Проблема:** Агент не может пригласить коллегу/партнёра для совместной сделки

**User Story:**
> Как агент, я хочу пригласить коллегу в сделку по SMS, чтобы мы могли разделить комиссию

**Реализовано:**
- ✅ Модель `DealInvitation` — `backend/app/models/invitation.py`
- ✅ Миграция 008 — `deal_invitations` таблица
- ✅ API endpoints — `backend/app/api/v1/endpoints/invitations.py`
- ✅ Frontend страница — `/invite/[token]`
- ✅ Интеграция в форму создания сделки (Step 3)
- ✅ Ввод телефона со-агента вместо ID
- ✅ Автоматическая отправка SMS после создания сделки
- ✅ Форматирование и валидация телефона

**Статус:** ✅ Завершено (2026-01-18)

---

#### GAP-002: Информирование о комиссии сервиса ✅ ЗАВЕРШЕНО
**Проблема:** Клиент/агент не видит сколько составит комиссия платформы

**User Story:**
> Как агент, я хочу видеть комиссию сервиса (4%) до создания сделки, чтобы понимать итоговую сумму

**Реализовано (2026-01-18):**
- ✅ Показ breakdown: "Клиент платит: X руб., Комиссия сервиса: Y руб., Агент получает: Z руб."
- ✅ Комиссия вычитается ИЗ доли агента (не добавляется сверху)
- ✅ Поддержка диапазона комиссии (spread): от X до Y руб.
- ✅ Форматирование чисел с разделителями тысяч
- ✅ Checkbox согласия с показом итоговой суммы

**Статус:** ✅ Завершено

---

#### GAP-003: Согласие на комиссию ✅ ПОЛНОСТЬЮ ГОТОВ
**Проблема:** Нет юридического согласия агента на комиссию перед созданием сделки

**User Story:**
> Как платформа, я требую от агента подтверждение согласия на комиссию 4%

**Реализовано:**
- ✅ Модель `DealConsent` — `backend/app/models/consent.py`
- ✅ Миграция 007 — `deal_consents` таблица
- ✅ Enum `ConsentType`: PLATFORM_COMMISSION, DATA_PROCESSING, TERMS_OF_SERVICE, SPLIT_AGREEMENT
- ✅ Checkbox на UI в форме создания сделки
- ✅ Показ комиссии 4% в форме

**Статус:** ✅ Завершено

---

#### GAP-004: Уведомления участникам
**Проблема:** Участники сделки не получают уведомления о статусах

**User Story:**
> Как участник сделки, я хочу получать SMS/Email при изменении статуса

**События для уведомлений:**
| Событие | Получатели |
|---------|------------|
| Сделка создана | Все участники |
| Приглашение отправлено | Приглашённый |
| Приглашение принято | Создатель |
| Сделка на подписании | Все участники |
| Сделка подписана | Клиент |
| Оплата получена | Все агенты |
| Холд завершён, выплата | Получатели выплат |
| Сделка отменена | Все участники |

**Требуется:**
- EventBus для deal events
- NotificationHandler с шаблонами
- SMS templates
- Email templates
- Retry логика

**Оценка:** 5-7 дней

---

#### GAP-005: Механизм споров и возвратов ✅ ЗАВЕРШЕНО
**Проблема:** Нет способа оспорить сделку или запросить возврат

**User Story:**
> Как клиент/агент, я хочу оспорить сделку в период холда, если что-то пошло не так

**Реализовано (Backend):**
- ✅ Модель `Dispute` — `backend/app/models/dispute.py`
- ✅ Модель `DisputeEvidence` — для файлов-доказательств
- ✅ Миграция 009 — `disputes`, `dispute_evidence` таблицы
- ✅ API: `POST /bank-split/{id}/dispute` — создать спор
- ✅ API: `GET /bank-split/{id}/disputes` — список споров
- ✅ Статусы: open, under_review, resolved, rejected, cancelled
- ✅ Refund tracking: refund_status, refund_amount, refund_external_id

**Реализовано (Frontend, 2026-01-18):**
- ✅ UI форма создания спора на странице сделки
- ✅ Dropdown с причинами (6 вариантов)
- ✅ Текстовое описание проблемы
- ✅ Отображение статуса спора и возврата
- ✅ Кнопка "Открыть спор" в период холда
- ✅ Человекочитаемые лейблы причин

**Статус:** ✅ Завершено

---

### P1 — ВАЖНЫЕ (улучшают UX)

#### GAP-006: Подтверждение выполнения услуги ✅ ЗАВЕРШЕНО
**Проблема:** Release из холда происходит автоматически по времени, без подтверждения

**User Story:**
> Как агент, я хочу подтвердить выполнение услуги, чтобы ускорить выплату

**Реализовано:**
- ✅ Модель `ServiceCompletion` — `backend/app/models/service_completion.py`
- ✅ Миграция 010 — `service_completions` таблица
- ✅ Поля: deal_id, confirmed_by_user_id, confirmed_at, evidence_file_ids, notes
- ✅ API: `POST /bank-split/{id}/confirm-completion`
- ✅ API: `GET /bank-split/{id}/completion-status`
- ✅ Кнопка "Подтвердить выполнение услуги" на странице сделки
- ✅ Отображение статуса подтверждения

**Статус:** ✅ Завершено

---

#### GAP-007: Настройка пропорций сплита ✅ ЗАВЕРШЕНО
**Проблема:** Сейчас пропорции задаются при создании, нет UI для их настройки

**User Story:**
> Как агент, я хочу предложить партнёру пропорции 60/40 и дождаться его согласия

**Реализовано (2026-01-18):**
- ✅ Компонент `SplitSlider` — визуальный слайдер с цветной полосой
- ✅ Интеграция в форму создания сделки (Step 3)
- ✅ Динамический расчёт сумм на основе комиссии
- ✅ Показ комиссии платформы 4% в слайдере
- ✅ Поддержка нескольких участников (agent, coagent, agency)
- ✅ Валидация: сумма = 100%
- ✅ Range inputs для точной настройки процентов

**Файлы:**
- `frontend/components/deals/SplitSlider.tsx` — компонент
- `frontend/app/agent/deals/bank-split/new/page.tsx` — интеграция

**Статус:** ✅ Завершено

---

#### GAP-008: Корректировки после оплаты ✅ ЗАВЕРШЕНО
**Проблема:** Нельзя изменить split после получения оплаты

**User Story:**
> Как агент, я хочу скорректировать пропорции, если выяснились новые обстоятельства

**Реализовано (Backend):**
- ✅ Модель `SplitAdjustment` — `backend/app/models/split_adjustment.py`
- ✅ Миграция 011 — `split_adjustments` таблица
- ✅ Поля: deal_id, requested_by_user_id, old_split, new_split, reason, status, approvals
- ✅ API endpoints: adjust-split, adjustments list, approve, reject

**Реализовано (Frontend, 2026-01-18):**
- ✅ Кнопка "Изменить пропорции" на странице сделки
- ✅ Модальное окно с полями для новых процентов
- ✅ Валидация суммы = 100%
- ✅ Отображение pending запросов
- ✅ Кнопки "Согласиться" / "Отклонить"
- ✅ Поле причины для отклонения

**Статус:** ✅ Завершено

---

#### GAP-009: Валидация данных получателей
**Проблема:** INN не валидируется, нет проверки по реестрам

**Требуется:**
- Валидация контрольной суммы INN
- Проверка статуса самозанятого в ФНС
- Blacklist checking

**Оценка:** 2-3 дня

---

#### GAP-010: Договор с агентом ✅ BACKEND ГОТОВ
**Проблема:** Нет формализованного договора об условиях работы

**Реализовано (Backend):**
- ✅ Модель `ContractTemplate` — `backend/app/models/contract.py`
- ✅ Модель `SignedContract` — для подписанных договоров
- ✅ Миграция 012 — `signed_contracts` таблица
- ✅ Версионирование шаблонов

**Осталось (Frontend):**
- [ ] UI для просмотра и подписания договора
- [ ] Генерация PDF

**Оценка:** 2-3 дня (только frontend)

---

### P2 — ЖЕЛАТЕЛЬНЫЕ (nice to have)

#### GAP-011: Dashboard агента ✅ ГОТОВ
**Проблема:** Нет UI для просмотра истории сделок

**Реализовано:**
- ✅ `/agent/dashboard` — статистика, последние сделки, график
- ✅ `/agent/deals` — список сделок с фильтрами
- ✅ `/agent/profile` — профиль агента

#### GAP-012: Admin panel ✅ ЗАВЕРШЕНО
**Проблема:** Нет интерфейса администратора

**Реализовано (Backend):**
- ✅ API endpoints — `backend/app/api/v1/endpoints/admin.py`

**Реализовано (Frontend, 2026-01-18):**
- ✅ `/admin/dashboard` — глобальная аналитика, топ агентов
- ✅ `/admin/deals` — управление сделками с фильтрами
- ✅ `/admin/disputes` — модерация споров с resolve modal
- ✅ `/admin/payouts` — управление выплатами

**Статус:** ✅ Завершено

#### GAP-013: Аналитика и отчёты ⚠️ ЧАСТИЧНО
**Проблема:** Нет статистики по сделкам

**Реализовано:**
- ✅ Dashboard summary API
- ✅ Time series API для графиков
- ✅ Базовые графики на dashboard

**Осталось:**
- [ ] Детальная аналитика
- [ ] Экспорт отчётов

---

## ПЛАН РЕАЛИЗАЦИИ (ОБНОВЛЕНО 2026-01-18)

### PHASE 0: Quick Wins ✅ ЗАВЕРШЕНО
**Цель:** Исправить критические пробелы в UI, доставка ссылки на оплату

| Задача | Приоритет | Статус |
|--------|-----------|--------|
| BUG-002: Комиссия 4% в форме | P0 | ✅ |
| GAP-003: Checkbox согласия | P0 | ✅ |
| GAP-000.1: SMS ссылки оплаты | P0 | ✅ |
| BUG-001: Sign endpoint 500→404 | Low | ✅ |

**Завершено:** 2026-01-17

---

### PHASE 1: Compliance ✅ BACKEND ГОТОВ
**Цель:** Юридическая готовность к запуску

| Задача | Backend | Frontend | Осталось |
|--------|---------|----------|----------|
| GAP-002: Комиссия | ✅ | ✅ | — |
| GAP-003: Согласие | ✅ | ✅ | — |
| GAP-009: Валидация INN | ⚠️ | — | Интеграция ФНС |

**Итого:** ~1 день на INN валидацию

---

### PHASE 2: Multi-Agent ✅ ЗАВЕРШЕНО
**Цель:** Поддержка сделок с несколькими агентами

| Задача | Backend | Frontend | Осталось |
|--------|---------|----------|----------|
| GAP-001: Приглашения | ✅ | ✅ | — |
| GAP-007: Пропорции | ✅ | ✅ | — |
| GAP-004: SMS уведомления | ✅ | — | — |

**Статус:** ✅ Завершено (2026-01-18)

---

### PHASE 3: Reliability ✅ ЗАВЕРШЕНО
**Цель:** Обработка edge cases

| Задача | Backend | Frontend | Осталось |
|--------|---------|----------|----------|
| GAP-005: Споры | ✅ | ✅ | — |
| GAP-006: Подтверждение услуги | ✅ | ✅ | — |
| GAP-008: Корректировки | ✅ | ✅ | — |

**Статус:** ✅ Завершено (2026-01-18)

---

### PHASE 4: Legal & UX ⚠️ В РАБОТЕ
**Цель:** Полный compliance и UX

| Задача | Backend | Frontend | Осталось |
|--------|---------|----------|----------|
| GAP-010: Договоры | ✅ | ⚠️ | UI просмотр/подпись |
| GAP-004: Email уведомления | ⚠️ | — | Templates |
| GAP-011: Dashboard | ✅ | ✅ | — |
| GAP-012: Admin panel | ✅ | ✅ | — |
| GAP-013: Аналитика | ✅ | ⚠️ | Экспорт |

**Итого:** ~3-5 дней (договоры + email)

---

## TIMELINE (ОБНОВЛЕНО 2026-01-18)

```
                        BACKEND                    FRONTEND
                        ═══════                    ════════
PHASE 0: Quick Wins     [██████████] ✅            [██████████] ✅
PHASE 1: Compliance     [██████████] ✅            [██████████] ✅
PHASE 2: Multi-Agent    [██████████] ✅            [██████████] ✅
PHASE 3: Reliability    [██████████] ✅            [██████████] ✅
PHASE 4: Legal & UX     [████████░░] 80%          [███████░░░] 70%
```

**Осталось:**
- Email уведомления: ~2-3 дня
- Договоры UI: ~2-3 дня
- INN валидация ФНС: ~1-2 дня

**Общая оценка до полной готовности:** 5-8 дней (~1 неделя)

**Прогресс 2026-01-18:**
- ✅ Исправлен расчёт комиссии (вычитается ИЗ агента)
- ✅ Добавлен спред комиссии (диапазон от-до)
- ✅ Маска форматирования чисел
- ✅ UI подтверждения услуги (GAP-006)
- ✅ Invite flow для со-агента (GAP-001) — SMS приглашение вместо ID
- ✅ UI споров (GAP-005) — форма, причины, статусы
- ✅ UI корректировки сплита (GAP-008) — модальное окно, approve/reject
- ✅ UI слайдер пропорций (GAP-007) — SplitSlider компонент
- ✅ Admin panel (GAP-012) — dashboard, deals, disputes, payouts

---

## ВОПРОСЫ ДЛЯ СОГЛАСОВАНИЯ

### F.Doc интеграция (НОВЫЕ)

7. **F.Doc тариф** — какой тариф нужен? (стандарт/бизнес/enterprise)

8. **F.Doc credentials** — кто запрашивает доступ? (sales@fdoc.ru)

9. **Сохранение текущей ПЭП** — оставить как fallback или полностью заменить на F.Doc?

10. **Соглашение об ЭДО** — F.Doc требует подписания соглашения с клиентом. Включить в договор автоматически?

### Доставка ссылки на оплату (НОВЫЕ)

11. **Способ доставки ссылки на оплату** — SMS, QR, Email? Или выбор агента?

12. **Автоматическая отправка** — отправлять SMS сразу после подписания или по команде агента?

### Ранее заданные

1. **Комиссия 4%** — это финальная цифра? Нужна ли возможность менять для разных типов сделок?

2. **Приглашение по SMS** — достаточно ли SMS или нужен также WhatsApp/Telegram?

3. **Споры** — кто модерирует? Нужен ли арбитраж или решает платформа?

4. **Договор с агентом** — есть ли готовый шаблон от юристов?

5. **Hold period** — сейчас 1 час. Нужна ли гибкость (разные периоды для разных типов)?

6. **Минимальная сумма сделки** — есть ли ограничение снизу?

---

## РИСКИ

| Риск | Вероятность | Влияние | Митигация |
|------|-------------|---------|-----------|
| T-Bank API изменится | Низкая | Высокое | Версионирование, contract tests |
| Юридические требования | Средняя | Высокое | Раннее привлечение юристов |
| Споры без модератора | Высокая | Среднее | Автоматические правила + эскалация |
| SMS не доходят | Средняя | Среднее | Retry + fallback на email |
| F.Doc недоступен | Низкая | Высокое | Fallback на внутреннюю ПЭП |
| F.Doc долгий onboarding | Средняя | Среднее | Начать процесс заблаговременно |
| F.Doc изменит API | Низкая | Среднее | Версионирование, мониторинг changelog |

---

## СЛЕДУЮЩИЕ ШАГИ

### Немедленно (эта неделя) — после UI тестирования
1. [ ] **Согласовать этот документ** с Product Owner
2. [x] **BUG-002 (КРИТИЧНО):** Добавить показ комиссии 4% в bank-split форму ✅
3. [x] **GAP-003:** Добавить checkbox согласия на комиссию ✅
4. [x] **BUG-001:** Исправить sign endpoint 500 → 404 ✅

### После согласования
5. [x] Реализовать отправку SMS со ссылкой на оплату ✅
6. [x] Добавить QR код на страницу сделки агента ✅ (уже был)
7. [ ] Получить T-Bank sandbox credentials

### F.Doc — опционально (после MVP)
8. [ ] Связаться с F.Doc если нужна внешняя ПЭП
9. [ ] Текущая ПЭП через SMS достаточна для MVP

---

## ССЫЛКИ

- **F.Doc API:** https://fdoc.ru/integration/api
- **F.Doc Spec:** https://demo.fdoc.ru/spec/
- **F.Doc База знаний:** https://fdoc.ru/d/knowledge-base/
- **T-Bank Instant Split:** (internal docs)

---

*Документ подготовлен: 2026-01-17*
*Обновлён: 2026-01-18 (v10 — GAP-012 Admin Panel complete)*

---

## СВОДКА СТАТУСА

| Компонент | Backend | Frontend | Итого |
|-----------|---------|----------|-------|
| Phase 0: Quick Wins | ✅ 100% | ✅ 100% | ✅ |
| Phase 1: Compliance | ✅ 100% | ✅ 100% | ✅ |
| Phase 2: Multi-Agent | ✅ 100% | ✅ 100% | ✅ |
| Phase 3: Reliability | ✅ 100% | ✅ 100% | ✅ |
| Phase 4: Legal & UX | ⚠️ 80% | ⚠️ 70% | ⚠️ |

**Ключевые выводы (2026-01-18):**

**Завершено:**
- ✅ Все backend модели для Phases 1-3 реализованы
- ✅ 13 миграций применены на production
- ✅ 16 моделей в backend
- ✅ 13 файлов API endpoints
- ✅ 23 frontend страницы
- ✅ ПЭП работает через SMS OTP
- ✅ T-Bank Instant Split готов к production
- ✅ Dashboard агента с аналитикой
- ✅ GAP-001: Invite flow для со-агента
- ✅ GAP-005: UI споров (форма, причины, статусы)
- ✅ GAP-006: Подтверждение выполнения услуги
- ✅ GAP-007: UI слайдер пропорций (SplitSlider)
- ✅ GAP-008: UI корректировки сплита
- ✅ GAP-012: Admin panel (dashboard, deals, disputes, payouts)

**В работе:**
- ⚠️ Email уведомления (GAP-004)
- ⚠️ Договоры UI (GAP-010)

**Оценка до полной готовности:** 4-7 дней

**Приоритет:** Frontend интеграция существующих backend API
